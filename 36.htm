<html>

<head>
  <title> 第5章 函数 - Lua程序设计</title>
  <meta http-equiv=Content-Type content="text/html; charset=UTF-8">
  <meta name="GENERATOR" content="Macrobject Word-2-CHM">
  <link rel="stylesheet" href="Word2Chm.css" type="text/css">
  <link rel="stylesheet" href="default.css" type="text/css" />
</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation'>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
      <td class="moHeader">&nbsp;第5章 函数</td>
    </tr>
  </table>
  
  <p></p>

<div class=Section1 style='layout-grid:15.6pt'>



<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>函数有两种用途：</span><span
lang=EN-US>1.</span><span style='font-family:宋体'>完成指定的任务，这种情况下函数作为调用语句使用；</span><span
lang=EN-US>2.</span><span style='font-family:宋体'>计算并返回值，这种情况下函数作为赋值语句的表达式使用。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>语法：</span></p>

<div style='border:RGB(2,243,194) dashed 1px;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#fff;margin-left:21.0pt;margin-right:21.0pt'>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(220,250,245)'><span
lang=EN-US style='color:blue'>function</span><span lang=EN-US> func_name
(arguments-list)</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; statements-list;</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(246,222,241)'><span
lang=EN-US style='color:blue'>end</span><span lang=EN-US>;</span></p>

</div>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>调用函数的时候，如果参数列表为空，必须使用</span><span
lang=EN-US>()</span><span style='font-family:宋体'>表明是函数调用。</span></p>

<div style='border:RGB(2,243,194) dashed 1px;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#fff;margin-left:21.0pt;margin-right:21.0pt'>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(232,221,254)'><span
lang=EN-US>print(8*9, 9/8)</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>a = math.sin(3) + math.cos(10)</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(253,226,224)'><span
lang=EN-US>print(os.date())</span></p>

</div>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>上述规则有一个例外，当函数只有一个参数并且这个参数是字符串或者表构造的时候，</span><span
lang=EN-US>()</span><span style='font-family:宋体'>可有可无：</span></p>

<div style='border:RGB(2,243,194) dashed 1px;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#fff;margin-left:21.0pt;margin-right:21.0pt'>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(249,224,222)'><span
lang=EN-US>print <span style='color:red'>&quot;Hello World&quot;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print(<span
style='color:red'>&quot;Hello World&quot;</span>)</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>dofile <span style='color:red'>'a.lua'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dofile
(<span style='color:red'>'a.lua'</span>)</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(253,227,249)'><span
lang=EN-US>print [[a multi-line&nbsp;&nbsp;&nbsp;&nbsp; &lt;--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print([[a
multi-line</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; message]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; message]])</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(232,255,228)'><span
lang=EN-US>f{x=10, y=20}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; f({x=10,
y=20})</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>type{}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type({})</span></p>

</div>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>Lua</span><span
style='font-family:宋体'>也提供了面向对象方式调用函数的语法，比如</span><span lang=EN-US>o:foo(x)</span><span
style='font-family:宋体'>与</span><span lang=EN-US>o.foo(o, x)</span><span
style='font-family:宋体'>是等价的，后面的章节会详细介绍面向对象内容。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>Lua</span><span
style='font-family:宋体'>使用的函数，既可是</span><span lang=EN-US>Lua</span><span
style='font-family:宋体'>编写的，也可以是其他语言编写的，对于</span><span lang=EN-US>Lua</span><span
style='font-family:宋体'>程序员，用什么语言实现的函数使用起来都一样。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>Lua</span><span
style='font-family:宋体'>函数实参和形参的匹配与赋值语句类似，多余部分被忽略，缺少部分用</span><span lang=EN-US>nil</span><span
style='font-family:宋体'>补足。</span></p>

<div style='border:RGB(2,243,194) dashed 1px;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:RGB(231,251,227);margin-left:21.0pt;margin-right:21.0pt'>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US style='color:blue'>function</span><span lang=EN-US> f(a, b) <span
style='color:blue'>return</span> a <span style='color:blue'>or</span> b <span
style='color:blue'>end</span></span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(237,229,255)'><span
lang=EN-US>&nbsp;</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>CALL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PARAMETERS</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(223,221,253)'><span
lang=EN-US>&nbsp;</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>f(3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a=3,
b=nil</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(239,241,238)'><span
lang=EN-US>f(3, 4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a=3,
b=4</span></p>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:#fff'><span
lang=EN-US>f(3, 4, 5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a=3, b=4&nbsp;&nbsp; (5
is discarded)</span></p>

</div>


</div>
  <p></p>
  <hr class="moHR" />
  <span class="moCopyright">
    相关链接：
<br /><a href=3.htm>lua程序设计目录</a> - <a href="http://www.luaer.cn">中国lua开发者</a> - <a href="http://bbs.luaer.cn">lua论坛</a> 
  </span><div id="bookfoot"></div>
<script language="JavaScript" src="js/ad.js"></script>
</body>

</html>

