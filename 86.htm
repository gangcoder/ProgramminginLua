<html>

<head>
  <title> 第14章 环境 - Lua程序设计</title>
  <meta http-equiv=Content-Type content="text/html; charset=UTF-8">
  <meta name="GENERATOR" content="Macrobject Word-2-CHM">
  <link rel="stylesheet" href="Word2Chm.css" type="text/css">
  <link rel="stylesheet" href="default.css" type="text/css" />
</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation'>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
      <td class="moHeader">&nbsp;第14章 环境</td>
    </tr>
  </table>
  
  <p></p>

<div class=Section1 style='layout-grid:15.6pt'>



<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>Lua</span><span
style='font-family:宋体'>用一个名为</span><span lang=EN-US>environment</span><span
style='font-family:宋体'>普通的表来保存所有的全局变量。（更精确的说，</span><span lang=EN-US>Lua</span><span
style='font-family:宋体'>在一系列的</span><span lang=EN-US>environment</span><span
style='font-family:宋体'>中保存他的“</span><span lang=EN-US>global</span><span
style='font-family:宋体'>”变量，但是我们有时候可以忽略这种多样性）这种结果的优点之一是他简化了</span><span
lang=EN-US>Lua</span><span style='font-family:宋体'>的内部实现，因为对于所有的全局变量没有必要非要有不同的数据结构。另一个</span><span
lang=EN-US>(</span><span style='font-family:宋体'>主要的</span><span lang=EN-US>)</span><span
style='font-family:宋体'>优点是我们可以像其他表一样操作这个保存全局变量的表。为了简化操作，</span><span
lang=EN-US>Lua</span><span style='font-family:宋体'>将环境本身存储在一个全局变量</span><span
lang=EN-US>_G</span><span style='font-family:宋体'>中，（</span><span lang=EN-US>_G._G</span><span
style='font-family:宋体'>等于</span><span lang=EN-US>_G</span><span
style='font-family:宋体'>）。例如，下面代码打印在当前环境中所有的全局变量的名字：</span></p>

<div style='border:RGB(183,24,238) dashed 1px;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#fff;margin-left:21.0pt;margin-right:21.0pt'>

<p class=AltD style='margin:0cm;margin-bottom:.0001pt;background:RGB(255,221,231)'><span
lang=EN-US style='color:blue'>for</span><span lang=EN-US> n <span
style='color:blue'>in</span> pairs(_G) <span style='color:blue'>do</span>
print(n) <span style='color:blue'>end</span></span></p>

</div>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>这一章我们将讨论一些如何操纵环境的有用的技术。</span></p>


</div>
  <p></p>
  <hr class="moHR" />
  <span class="moCopyright">
    相关链接：
<br /><a href=3.htm>lua程序设计目录</a> - <a href="http://www.luaer.cn">中国lua开发者</a> - <a href="http://bbs.luaer.cn">lua论坛</a> 
  </span><div id="bookfoot"></div>
<script language="JavaScript" src="js/ad.js"></script>
</body>

</html>

